KISSY.add("tbc/sku/1.0.7/mods/track",["base","json"],function(a,b,c,d){var e=b("base"),f=b("json");d.exports=e.extend({send:function(b){var c=this,d=c.get("startTime"),e={ua:navigator.userAgent,msg:"",nick:"",file:"",line:0,delay:+new Date-d,screen:screen.width+"x"+screen.height,scrolltop:document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop||0,url:"//item.taobao.com/track/",category:"",sampling:1e3};if(b=a.merge(e,b),7===parseInt(Math.random()*b.sampling)){try{var g=/_nk_=([^;]+)/.exec(document.cookie);g&&(b.nick=g[1])}catch(h){}b.msg=["[u"+b.url+"]","[t"+b.delay+"]","[c"+b.category+"]","[r"+b.sampling+"]"].join("")+(a.isObject(b.msg)?f.stringify(b.msg):b.msg),c.sendImage("//gm.mmstat.com/ued.1.1.2?"+["type=9","id=jstracker","v=0.02","ua="+encodeURIComponent(b.ua),"msg="+encodeURIComponent(b.msg),"nick="+decodeURIComponent(b.nick),"file="+encodeURIComponent(b.file),"line="+b.line,"screen="+b.screen,"scrolltop="+b.scrolltop,"t="+(new Date).valueOf()].join("&"))}},sendImage:function(a){var b="_img_"+ +new Date,c=window[b]=new Image;c.onload=c.onerror=function(){window[b]=null},c.src=a,c=null}},{ATTRS:{startTime:{value:window.g_config&&window.g_config.startTime||+new Date}}})}),KISSY.add("tbc/sku/1.0.7/index",["node","base","./mods/track"],function(a,b,c,d){var e=b("node"),f=b("base"),g=b("./mods/track"),h=e.all;d.exports=f.extend({init:function(){var a=this,b=new g;try{a.getPropertyIds(),a.normalizeSkuMap(),a.serializeSkuMap(),a.getSkuMapConfig(),a.bind()}catch(c){b.send({msg:{url:location.href,err:c},category:"sku:init:false"})}},bind:function(){var b=this,c=b.get("root"),d=b.get("hook"),e=b.get("attrName"),f=b.get("selectedClass"),g=b.get("disabledClass"),i=h(d,c),j=function(){var c=[],d=b.get("props");return a.each(d,function(a){a&&c.push(a[0])}),h(c)},k=function(a){var b=[];return a.each(function(a){b.push(a.attr(e))}),b};h(c).delegate("click",d,function(c){var d=h(c.currentTarget),l=d.attr(e),m=l&&l.split(":")[0],n=b.get("props"),o=b.get("serializedSkuMap");if(c.halt(),m&&!d.hasClass(g)){n[m]=d.hasClass(f)?null:d,d.toggleClass(f).siblings().removeClass(f);var p=j(),q=[];p.length?(q=k(p),q=b.sortPropertyId(q),i.each(function(c){var h,i,j=[];a.inArray(c[0],p)||c[0]===d[0]||(h=c.siblings("."+f),h.length?(i=h.attr(e),a.each(q,function(a){a!==i&&j.push(a)})):j=q,j=j.concat(c.attr(e)),j=b.sortPropertyId(j),o[j.join(";")]?c.removeClass(g):c.addClass(g).removeClass(f))})):i.each(function(a){o[a.attr(e)]?a.removeClass(g):a.addClass(g).removeClass(f)}),b.fireCustomEvent(d,p,q)}}),i.each(function(a){0===a.siblings().length&&a.fire("click")})},getPropertyIds:function(){var a=this,b=a.get("root"),c=a.get("hook"),d=a.get("attrName"),e={};h(c,b).each(function(a){var b=a.attr(d);if(b){var c=b.split(":")[0];!c||c in e||(e[c]=null)}}),a.set("props",e)},sortPropertyId:function(a){return a.sort(function(a,b){return parseInt(a)-parseInt(b)}),a},mixDynamicPromo:function(b,c){return c&&!a.isEmptyObject(c)&&a.each(c,function(c,d){var e=b[d];e&&c.length&&(c[0].price&&(e.priceDefault=e.price),a.mix(e,c[0]),e.limit=c[0].amountRestriction)}),b},mixDynamicStock:function(b,c){var d=this,e=d.get("root"),f=d.get("hook"),g=d.get("attrName"),i=h(f,e),j={};return c&&!a.isEmptyObject(c)&&(a.each(b,function(d,e){var f=c[e];if(f&&f.stock){var g=e.split(";");a.each(g,function(a){j[a]=!0}),b[e].stock=f.stock,b[e].oversold=f.oversold}else delete b[e]}),i.each(function(a){var b=a.attr(g);b&&!j[b]&&a.remove()})),b},hasSku:function(){var b=this,c=b.get("skuMap");return c&&!a.isEmptyObject(c)},hasPromo:function(){var a=this,b=a.getDefaultPromo();return!(!b||!b.price)},isOverSold:function(){var a=this,b=a.getCurrentSku(),c=a.getDefaultStock();return c&&"0"===c.virtQuantity?!0:b&&"true"===b.oversold?!0:!1},setCurrentSku:function(b){var c=this,d=c.get("root"),e=c.get("hook"),f=c.get("attrName"),g=c.get("selectedClass"),i=c.get("disabledClass"),j=h(e,d),k=b.pvs;a.isString(k)&&(j.each(function(a){a.hasClass(g)&&a.fire("click")}),j.removeClass(i),c.getPropertyIds(),j.each(function(a){var b=a.attr(f);~k.indexOf(b)&&a.fire("click")}))},getCurrentSku:function(){var a=this;return a.get("sku")},getDefaultPromo:function(){var a,b=this,c=b.get("promoMap"),d=c.def;return d&&d.length&&(d=d[0],a={type:d.type,price:d.price,limit:d.amountRestriction,isStart:d.isStart,limitTime:d.limitTime}),a},getDefaultStock:function(){var a,b=this,c=b.get("stockMap");return c&&(a={stock:c.stock,virtQuantity:c.virtQuantity}),a},normalizeSkuMap:function(){var b=this,c=b.get("skuMap"),d=b.get("promoMap"),e=b.get("stockMap")&&b.get("stockMap").sku,f=function(b){var c={};return a.each(b,function(a,b){var d;b=b.replace(/^;|;$/gi,""),d=b.split(";"),d.sort(function(a,b){return parseInt(a)-parseInt(b)}),c[d.join(";")]=a}),c};c=f(c),d=f(d),e=f(e),c=b.mixDynamicPromo(c,d),c=b.mixDynamicStock(c,e),b.set("skuMap",c)},serializeSkuMap:function(){var b=this,c=b.get("skuMap"),d={},e=function(b,c){var d=[];if(c===b.length)return[b];if(1===c)a.each(b,function(a){d.push([a])});else for(var f=0;f<=b.length-c;f++){var g=b.slice(f,f+1),h=b.slice(f+1);a.each(e(h,c-1),function(a){d.push(g.concat(a))})}return d};a.each(c,function(b,c){for(var f=c.split(";"),g=b.stock,h=b.price,i=[],j=1;j<=f.length;j++)i=i.concat(e(f,j));g=parseInt(g),a.each(i,function(a){var b=a.join(";"),c=d[b];c?(c.stock+=g,c.prices.push(h)):d[b]={stock:g,prices:[h]}})}),b.set("serializedSkuMap",d)},getSkuMapConfig:function(){var b=this,c=b.get("skuMap");a.each(c,function(a,c){return b.set("length",c.split(";").length),!1})},fireCustomEvent:function(b,c,d){var e=this,f=e.get("props"),g=e.get("length"),h=e.get("lastSelectedLength"),i=e.get("skuMap"),j=d.length,k={el:b,els:c,pvs:d.join(";"),props:f};if(e.fire("selectionChanged",{sku:k}),j===g){var l,m=d.join(";"),n=i[m];n=a.merge(n,k),l=h===g?"skuChanged":"skuFound",e.set("sku",n),e.fire(l,{sku:n})}else e.set("sku",null),h===g&&e.fire("skuLost",null);e.set("lastSelectedLength",j)}},{ATTRS:{root:{value:"#J_SKU"},hook:{value:".J_SKU"},skuMap:{value:{},getter:function(b){return a.clone(b)}},serializedSkuMap:{value:{}},promoMap:{value:{}},stockMap:{value:{}},attrName:{value:"data-pv"},selectedClass:{value:"tb-selected"},disabledClass:{value:"tb-disabled"},sku:{},props:{},length:{},lastSelectedLength:{value:0}}})});KISSY.add("tbc/header/1.4.6/container/container-xtpl",function(e,t,n,r){return function(){var e,t="",n=this.config,a=n.utils;"undefined"!=typeof r&&r.kissy&&(e=r);a.runBlockCommand,a.renderOutput,a.getProperty,a.runInlineCommand,a.getPropertyOrRunCommand;return t+='<div class="tb-header" role="banner">\n<div class="tb-header-content">\n</div>\n</div>'}}),KISSY.add("tbc/header/1.4.6/market/market-xtpl",function(e,t,n,r){return function(){var e,t="",n=this.config,a=n.utils;"undefined"!=typeof r&&r.kissy&&(e=r);a.runBlockCommand,a.renderOutput,a.getProperty,a.runInlineCommand,a.getPropertyOrRunCommand;return t+='<div id="J_Market" class="tb-header-market" role="dialog">\n    <a href="javascript:" class="tb-header-market-hd">\u66f4\u591a\u5e02\u573a<i class="tb-header-market-icon"><em></em><span></span></i></a>\n    <div class="tb-header-market-bd"></div>\n</div>'}}),KISSY.add("tbc/header/1.4.6/market/market-hover-xtpl",function(e,t,n,r){return function(e){var t,n="",a=this.config,i=this,s=a.utils;"undefined"!=typeof r&&r.kissy&&(t=r);{var o=s.runBlockCommand,c=s.renderOutput,u=s.getProperty;s.runInlineCommand,s.getPropertyOrRunCommand}n+="";var d={},l=[],h=u(i,e,"data",0,1);return l.push(h),d.params=l,d.fn=function(e){var t="";t+="\n";var n={},r=[],a=u(i,e,"data",0,2);return r.push(a),n.params=r,n.fn=function(e){var t="";t+='\n<dl>\n    <dt><a href="';var n=u(i,e,"this.href",0,4);t+=c(n,!0),t+='" target="_blank">';var r=u(i,e,"this.text",0,4);t+=c(r,!0),t+="</a></dt>\n    ";var a={},s=[],d=u(i,e,"this.subMarkets",0,5);return s.push(d),a.params=s,a.fn=function(e){var t="";t+='\n    <dd><a href="';var n=u(i,e,"this.href",0,6);t+=c(n,!0),t+='" target="_blank">';var r=u(i,e,"this.text",0,6);return t+=c(r,!0),t+="</a></dd>\n    "},t+=o(i,e,a,"each",5),t+="\n</dl>\n"},t+=o(i,e,n,"each",2),t+="\n"},d.inverse=function(){var e="";return e+="\n    <div>\u7f51\u7edc\u5f02\u5e38</div>\n"},n+=o(i,e,d,"if",1),n+="\n"}}),KISSY.add("tbc/header/1.4.6/events",function(e){return{emitter:e.all("body"),HEADER_MARKET_HOVER:"header:market:hover",HEADER_SEARCH_SHOP:"header:search:shop",HEADER_SEARCH_TB:"header:search:tb"}}),KISSY.add("tbc/header/1.4.6/market/market",["node","base","xtemplate","io","./market-xtpl","./market-hover-xtpl","../events"],function(e,t){var n=t("node"),r=t("base"),a=t("xtemplate"),i=t("io"),s=t("./market-xtpl"),o=t("./market-hover-xtpl"),c=t("../events"),u=c.emitter,d=n.all,l="tb-header-hover",h="mouseenter",m="mouseleave",p=300,f=null,g=null,v=r.extend({initializer:function(){},render:function(e){var t=new a(s),n=t.render(),r=d(n);this.set("el",r),e=e||this.get("render"),e.append(r)},renderHover:function(e,t){function n(n){var i=new a(o),s=i.render({data:n});e.css({background:"#fff",height:"auto"}),e.html(s);var c=e.height()+16;r.height=c,e.css({height:0}),t(c)}var r=this;if(this.get("rendered"))t(r.height);else{this.set("rendered",!0);{new i({url:"//www.taobao.com/go/rgn/vertical/jsonp.php",data:{},jsonp:"cb",dataType:"jsonp",success:function(e){n(e)},error:function(e){n(e)}})}}},bind:function(){var e=this,t=this.$el,n=d(".tb-header-market-bd",t);t.on([h,m].join(" "),function(r){g&&g.stop(),r.type==h?f=setTimeout(function(){t.addClass(l),u.fire(c.HEADER_MARKET_HOVER),e.renderHover(n,function(e){g=n.animate({height:e},{duration:.5,easing:"backOut"}),f=null})},p):f?(clearTimeout(f),t.removeClass(l)):g=n.animate({height:0},{duration:.3,easing:"backIn",complete:function(){t.removeClass(l)}})})}},{ATTRS:{el:{setter:function(e){this.$el=e,this.el=e[0]}},render:{}}});return v}),KISSY.add("tbc/header/1.4.6/search/search-xtpl",function(e,t,n,r){return function(e){var t,n="",a=this.config,i=this,s=a.utils;"undefined"!=typeof r&&r.kissy&&(t=r);var o=s.runBlockCommand,c=s.renderOutput,u=s.getProperty,d=(s.runInlineCommand,s.getPropertyOrRunCommand);n+='<div class="J_Search tb-header-search search ';var l=d(i,e,{},"elCls",0,1);n+=c(l,!0),n+='" role="search">\n    <div class="search-panel">\n        <form target="_top" action="';var h=d(i,e,{},"primaryAction",0,3);n+=c(h,!0),n+='" name="search" class="J_SearchForm">\n            <div class="search-buttons">\n                <button class="J_PrimarySearch search-button primary" type="submit">';var m=d(i,e,{},"primaryButton",0,5);n+=c(m,!0),n+="</button>\n                ";var p={},f=[],g=u(i,e,"secondaryShow",0,6);return f.push(g),p.params=f,p.fn=function(e){var t="";t+='\n                <button class="J_SecondarySearch search-button secondary" type="submit" data-action="';var n=d(i,e,{},"secondaryAction",0,7);t+=c(n,!0),t+='">\n                    ';var r=d(i,e,{},"secondaryButton",0,8);return t+=c(r,!0),t+="\n                </button>\n                "},n+=o(i,e,p,"if",6),n+='\n            </div>\n            <div class="search-panel-fields">\n                <input class="J_Suggest" name="q" accesskey="s" autocomplete="off">\n            </div>\n            <input type="hidden" value="newHeader" name="s_from">\n            <input type="hidden" name="ssid" value="s5-e">\n            <input type="hidden" name="search_type" value="item">\n            <input type="hidden" name="sourceId" value="tb.item">\n        </form>\n    </div>\n</div>'}}),KISSY.add("tbc/header/1.4.6/search/search",["node","base","xtemplate","../events","./search-xtpl","tbc/search-suggest/1.3.5/new_suggest.css","tbc/search-suggest/1.3.5/index","tbc/search-suggest/1.3.5/plugin/history"],function(e,t){var n=t("node"),r=t("base"),a=t("xtemplate"),i=n.all,s=t("../events"),o=t("./search-xtpl"),c=s.emitter,u=r.extend({initializer:function(){},render:function(e){var t=new a(o).render({primaryAction:this.get("primaryAction"),primaryButton:this.get("primaryButton"),secondaryAction:this.get("secondaryAction"),secondaryButton:this.get("secondaryButton"),secondaryShow:this.get("secondaryShow"),elCls:this.get("elCls")}),n=i(t);this.set("el",n),e=e||this.get("render"),e.append(n)},bind:function(){t("tbc/search-suggest/1.3.5/new_suggest.css");var e=t("tbc/search-suggest/1.3.5/index"),n=t("tbc/search-suggest/1.3.5/plugin/history"),r=this.$el,a=(new e({plugins:[new n],sugConfig:{sourceUrl:"//suggest.taobao.com/sug?k=1&area=c2c",node:i(".J_Suggest",r),focused:!1,resultFormat:""},mods:{sort:["history","list"]}}),i(".J_SecondarySearch",r));a.on("click",function(){c.fire(s.HEADER_SEARCH_SHOP);var e=a.attr("data-action");e&&i(".J_SearchForm",r).attr("action",e)});var o=i(".J_PrimarySearch",r);o.on("click",function(){c.fire(s.HEADER_SEARCH_TB)})}},{ATTRS:{el:{setter:function(e){this.$el=e,this.el=e[0]}},render:{},elCls:{value:""},primaryAction:{value:"//s.taobao.com/search"},primaryButton:{value:"\u641c\u6dd8\u5b9d"},secondaryAction:{value:""},secondaryButton:{value:"\u641c\u672c\u5e97"},secondaryShow:{value:!0}}});return u}),KISSY.add("tbc/header/1.4.6/logo/logo-xtpl",function(e,t,n,r){return function(e){var t,n="",a=this.config,i=this,s=a.utils;"undefined"!=typeof r&&r.kissy&&(t=r);var o=(s.runBlockCommand,s.renderOutput),c=(s.getProperty,s.runInlineCommand,s.getPropertyOrRunCommand);n+='<div class="tb-header-logo">\n    <a href="';var u=c(i,e,{},"href",0,2);n+=o(u,!0),n+='" target="_blank" title="';var d=c(i,e,{},"title",0,2);n+=o(d,!0),n+='">\n        <img height="38" alt="\u6dd8\u5b9d\u7f51logo" src="';var l=c(i,e,{},"src",0,3);return n+=o(l,!0),n+='">\n    </a>\n</div>'}}),KISSY.add("tbc/header/1.4.6/logo/logo",["node","base","xtemplate","./logo-xtpl","../events"],function(e,t){var n=t("node"),r=t("base"),a=t("xtemplate"),i=t("./logo-xtpl"),s=t("../events"),o=(s.emitter,n.all),c=e.isArray,u=r.extend({initializer:function(){},render:function(e){var t=new a(i),n=window.devicePixelRatio>1,r=this.get("src");c(r)&&(r=(n?r[1]:r[0])||r[0]);var s=t.render({href:this.get("href"),src:r,title:this.get("title")}),u=o(s);this.set("el",u),e=e||this.get("render"),e.append(u)}},{ATTRS:{el:{setter:function(e){this.$el=e,this.el=e[0]}},render:{},title:{value:"\u6dd8\u5b9d\u7f51"},src:{value:"//gtms01.alicdn.com/tps/i1/T1Kz0pXzJdXXXIdnjb-146-58.png"},href:{value:"//www.taobao.com"}}});return u}),KISSY.add("tbc/header/1.4.6/nav/nav-xtpl",function(e,t,n,r){return function(e){var t,n="",a=this.config,i=this,s=a.utils;"undefined"!=typeof r&&r.kissy&&(t=r);{var o=s.runBlockCommand,c=s.renderOutput,u=s.getProperty;s.runInlineCommand,s.getPropertyOrRunCommand}n+='<div class="tb-header-nav">\n    <ul>\n        ';var d={},l=[],h=u(i,e,"items",0,3);return l.push(h),d.params=l,d.fn=function(e){var t="";t+='\n        <li class="tb-header-nav-item"><a target="_blank" href="';var n=u(i,e,"this.href",0,4);t+=c(n,!0),t+='">';var r=u(i,e,"this.text",0,4);return t+=c(r,!0),t+="</a></li>\n        "},n+=o(i,e,d,"each",3),n+="\n    </ul>\n</div>"}}),KISSY.add("tbc/header/1.4.6/nav/nav",["node","base","xtemplate","./nav-xtpl","../events"],function(e,t){var n=t("node"),r=t("base"),a=t("xtemplate"),i=t("./nav-xtpl"),s=t("../events"),o=(s.emitter,n.all),c=r.extend({initializer:function(){},render:function(e){var t=new a(i),n=t.render({items:this.get("items")}),r=o(n);this.set("el",r),e=e||this.get("render"),e.append(r)}},{ATTRS:{el:{setter:function(e){this.$el=e,this.el=e[0]}},items:{}}});return c}),KISSY.add("tbc/header/1.4.6/types",["./market/market","./search/search","./logo/logo","./nav/nav"],function(e,t){var n=t("./market/market"),r=t("./search/search"),a=t("./logo/logo"),i=t("./nav/nav"),s={getDefaultLogo:function(){return new a},getDefaultSearch:function(e){return new r({secondaryShow:Number(e.id),secondaryAction:e.url+"search.htm"})},getDefaultMarket:function(){return new n}},o={"default":function(e){var t=[];return t.push(s.getDefaultLogo(),s.getDefaultMarket(),s.getDefaultSearch(e)),t},global:function(){var e=[],t=new a({src:"//gtms03.alicdn.com/tps/i3/TB1J.3PFVXXXXcwXFXXjlPJMXXX-314-45.png",href:"//g.taobao.com",title:"\u8db3\u4e0d\u51fa\u6237\uff0c\u6dd8\u904d\u5168\u7403"}),n=new i({items:[]}),s=new r({elCls:"global",primaryButton:"\u641c\u5168\u7403\u8d2d",primaryAction:"//g.taobao.com/brand_detail.htm",secondaryButton:"\u641c\u6dd8\u5b9d",secondaryAction:"//s.taobao.com/search"});return e.push(t,n,s),e},xiami:function(e){var t=[],n=new a({src:"//img.xiami.net/static/taonei/musichall/images/mh-logo.png",href:"//music.taobao.com/"}),i=s.getDefaultMarket(),o=new r({primaryButton:"\u641c\u7d22",primaryAction:"//music.taobao.com/market/music/list.php?_input_charset=utf-8",secondaryShow:Number(e.id),secondaryAction:e.url+"search.htm"});return t.push(n,i,o),t},tiaoshi:function(){var e=[],t=new a({src:"//gtms02.alicdn.com/tps/i2/TB1lgaLGVXXXXcCXpXXAHEkKpXX-255-76.png",href:"//tiaoshi.taobao.com/"}),n=new r({elCls:"tiaoshi",primaryButton:"\u641c\u98df\u54c1",primaryAction:"//chi.taobao.com/itemlist/huichi2014.htm?style=grid&_input_charset=utf-8&cat=50002766,50035978,50008825,50042258,50103282,50103280,50106154,50108542",primaryParams:{style:"grid",_input_charset:"utf-8",cat:"50002766,50035978,50008825,50042258,50103282,50103280,50106154,50108542"},secondaryButton:"\u641c\u6dd8\u5b9d",secondaryAction:"//s.taobao.com/search"});return e.push(t,n),e},star:function(e){var t=[],n=new a({src:"//gtms01.alicdn.com/tps/i3/T1wWXuFbBbXXXFH6je-160-64.png",href:"//star.taobao.com"});return t.push(n,s.getDefaultMarket(),s.getDefaultSearch(e)),t},jiyoujia:function(e){var t=[],n=new a({src:"//img.alicdn.com/tps/i2/TB1fI7bHXXXXXc0XVXXlK5nGFXX-162-42.png",href:"//www.jiyoujia.com"});return t.push(n,s.getDefaultMarket(),s.getDefaultSearch(e)),t}};return{types:o,item:s,getItems:function(e){var t=e.type,n=e.shop,r=e.seller,a=e.item;return(o[t]||o["default"])(n,a,r)}}}),KISSY.add("tbc/header/1.4.6/index",["./index.css","base","node","./container/container-xtpl","./types","xtemplate"],function(e,t){t("./index.css");var n=t("base"),r=t("node"),a=t("./container/container-xtpl"),i=t("./types"),s=t("xtemplate"),o=r.all,c=n.extend({initializer:function(){this.render()},render:function(){if(!this.get("rendered")){var t=i.getItems({type:this.get("type"),item:this.get("item")||{},shop:this.get("shop")||{},seller:this.get("seller")||{}});this.set("rendered",!0);var n=new s(a),r=n.render(),c=o(r);this.set("el",c);var u=o(".tb-header-content",c);e.each(t,function(e){e.render&&e.render(u)});var d=o(this.get("renderTo"));d.append(c),e.each(t,function(e){e.bind&&e.bind()})}}},{ATTRS:{el:{setter:function(e){this.$el=e,this.el=e[0]}},renderTo:{}}});return c});!function(e,t){function o(){}try{t(e)}catch(n){e.Log={info:o,warn:o,error:o,debug:o}}"undefined"!=typeof KISSY?KISSY.add("tbc/log/0.4.1/index",[],function(){return e.Log}):"undefined"!=typeof define&&define("log",[],function(){return e.Log})}("undefined"!=typeof window?window:this,function(e){function t(t){var o=location.href.indexOf("ks-debug")>-1||location.href.indexOf("log-tools")>-1;o&&(this.console=t&&t.console||e.console)}function o(){function t(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o}var o=this;if(!e._console){var n=[];_console={log:function(){var e=arguments;n.push(function(t){t.log.apply(t,e)})},iterator:function(e){for(var t,o=0;t=n[o++];)t(e)}}}t(document,"keydown",function(e){var t=e.target,n=t&&t.tagName;!e.metaKey&&!e.ctrlKey||e.shiftKey!==!0||190!==e.keyCode||"INPUT"===n||"SELECT"===n||"TEXTAREA"===n||t.isContentEditable||(e.preventDefault(),o.show())}),location.search.indexOf("log-tools")>-1&&this.show()}function n(e){e=e||{},this.url=e.url||location.host+location.pathname,this.random=Math.random(),this.server="//poc.taobao.com/1.gif?"}function r(t){t=t||{},this.sampling=t.sampling||1e3,this.startTime=t.startTime||e.g_config&&g_config.startTime||+new Date,this.screen=t.screen||screen.width+"x"+screen.height,this.ua=t.ua||navigator.userAgent,this.url=t.url||location.protocol+"//"+location.host+location.pathname+"/log",this.random=Math.random(),this.server=(location>"https"?"//log":"//gm")+".mmstat.com/jstracker.2?"}function i(e){this.group=e,i.loggers[e]=this}function s(e,t){if(e.indexOf)return e.indexOf(t);for(var o=0,n=e.length;n>o;++o)if(e[o]===t)return o;return-1}function l(e){for(var t=1,o=arguments,n=o.length,r=String(e).replace(c,function(e){if("%%"===e)return"%";if(t>=n)return e;switch(e){case"%s":return String(o[t++]);case"%d":return Number(o[t++]);default:return e}}),i=o[t];n>t;i=o[++t])r+=" "+i;return r}t.prototype={receive:function(e){if(this.console){var t=e.level,o=e.message,n=e.group,r="["+n+"] "+o;this.console[t]&&this.console[t](r)}}},o.prototype={isTestEnv:function(){var e=location.host,t=location.href;return e.indexOf("daily")>-1||e.indexOf("pre")>-1||t.indexOf("ks-debug")>-1||t.indexOf("log-tools")>-1}(),promptNum:0,promptId:"log-prompt",promptStyle:"cursor: pointer; position: fixed; _position: absolute; right: 5px; bottom: 5px; z-index: 2147483640;border-radius: 50px;background: rgba(0, 0, 0, 0.7);width: 48px;color: #f00;height: 48px;line-height: 48px;font-size: 24px;text-align: center;",showPrompt:function(){var e=document.getElementById(this.promptId);if(e)e.innerText=++this.promptNum;else{var t=this,o=document.createElement("div");document.body.appendChild(o),o.innerHTML='<div id="'+this.promptId+'" title="\u70b9\u51fb\u67e5\u770b\u9519\u8bef" style="'+this.promptStyle+'">'+ ++this.promptNum+"</div>",o.onclick=function(){o.parentNode.removeChild(o),t.show()}}},receive:function(t){var o=t.level,n=t.message,r=t.group,i=t.date;!this.isTestEnv||"warn"!=o&&"error"!=o||this.showPrompt(),e._console&&_console.log(o,r,n,i)},show:function(){if(_console.show)_console.show();else{_console.show=function(){};var t=document,o=t.head||t.getElementsByTagName("head")[0]||t.documentElement,n=o.getElementsByTagName("base")[0],r=+new Date,i="?"+r,s=t.createElement("link");s.rel="stylesheet",s.href=(e.LOG_TOOLS_CSS||"//g.alicdn.com/tbc/log-tools/index.css")+i,n?o.insertBefore(s,n):o.appendChild(s);var l=t.createElement("script");l.src=(e.LOG_TOOLS_JS||"//g.alicdn.com/tbc/log-tools/index.js")+i,n?o.insertBefore(l,n):o.appendChild(l)}}},n.prototype={receive:function(e){var t=e.level,o=e.message,n=e.group;this.send(this.server+["l="+(t+":"+n),"u="+this.url,"m="+o,"t="+(new Date).valueOf()].join("&"))},send:function(t){var o="__log_img_"+ +new Date,n=e[o]=new Image;n.onload=n.onerror=function(){e[o]=null},n.src=t,n=null}},r.prototype={receive:function(e){this.random*this.sampling>1||this.track(e)},track:function(e){var t=e.level,o=e.message,n=e.group,r={ua:this.ua,msg:o||"",nick:"",file:"",line:0,delay:+new Date-this.startTime,screen:this.screen,scrolltop:document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop||0,url:this.url,category:t+":"+n||"",sampling:this.sampling};try{var i=document.cookie,s=/_nk_=([^;]+)/.exec(i)||/_w_tb_nick=([^;]+)/.exec(i)||/lgc=([^;]+)/.exec(i);s&&(r.nick=s[1])}catch(l){}r.msg=["[u"+r.url+"]","[t"+r.delay+"]","[c"+r.category+"]","[r"+r.sampling+"]"].join("")+r.msg,this.send(this.server+["type=9","id=jstracker","v=0.02","ua="+encodeURIComponent(r.ua),"msg="+encodeURIComponent(r.msg),"nick="+decodeURIComponent(r.nick),"file="+encodeURIComponent(r.file),"line="+r.line,"screen="+r.screen,"scrolltop="+r.scrolltop,"t="+(new Date).valueOf()].join("&"))},send:function(t){var o="__log_img_"+ +new Date,n=e[o]=new Image;n.onload=n.onerror=function(){e[o]=null},n.src=t,n=null}},i.getLogger=function(e){return i.loggers[e]||new i(e)},i.reporters=[],i.loggers={},i.reporter=function(e,t){var o={level:["*"],group:["*"]};t=t||{},t.level||(t.level=o.level),t.group||(t.group=o.group);var n={reporter:e,config:t};return i.reporters.push(n),function(){i.reporters.splice(i.reporters.indexOf(n),1)}},i.prototype.reporter=function(){},i.prototype.log=function(e,t,o){try{for(var n in i.reporters){var r=i.reporters[n],l=r.config,c=r.reporter;if(!(-1===s(l.level,"*")&&-1===s(l.level,e)||-1===s(l.group,"*")&&-1===s(l.group,t)))try{c.receive({level:e,group:t,message:o,date:new Date})}catch(a){}}}catch(a){}};var c=/%[sd%]/g,a=["debug","info","warn","error"];for(var u in a){var p=a[u];i.prototype[p]=function(e){return function(t){t=l.apply(null,arguments),this.log(e,this.group,t)}}(p)}try{i.reporter(new o),i.reporter(new t),i.reporter(new r,{level:["warn","error"]}),i.reporter(new n,{level:["warn","error"]})}catch(d){}e.Log=i});